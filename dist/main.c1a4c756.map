{"version":3,"sources":["text/main.js"],"names":["deg","o","Math","PI","rDeg","random","min","max","floor","distance","x1","y1","x2","y2","disX","disY","sqrt","pow","canvas","document","querySelector","ctx","getContext","env","width","window","innerWidth","height","innerHeight","hue","createText","text","textCanvas","createElement","textCtx","fillStyle","font","fillText","imageData","getImageData","Dot","tx","ty","sx","sy","x","y","dis","tra","angle","atan2","v","cos","sin","beginPath","fillRect","update","init","w","h","nodes","data","dots","index","pixel","push","draw","forEach","dot","requestAnimationFrame"],"mappings":"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","file":"main.c1a4c756.map","sourceRoot":"..","sourcesContent":["//utils\nfunction deg(o) {\n    return Math.PI * o / 180\n}\n\nfunction rDeg(deg) {\n    return deg * 180 / Math.PI\n}\n\nfunction random(min, max) {\n    return Math.floor(Math.random() * (max - min) + min)\n}\n\nfunction distance(x1, y1, x2, y2) {\n    const disX = x1 - x2\n    const disY = y1 - y2\n    return Math.sqrt(Math.pow(disX, 2), Math.pow(disY, 2))\n}\n\n\n//game\nconst canvas = document.querySelector('canvas')\nconst ctx = canvas.getContext('2d')\nconst env = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    hue: 120\n}\n\nfunction createText(text, env) {\n    const textCanvas = document.createElement('canvas')\n    const textCtx = textCanvas.getContext('2d')\n    textCanvas.width = env.width\n    textCanvas.height = env.height\n    textCtx.fillStyle = \"#fff\";\n    textCtx.font = '200px arrial'\n    textCtx.fillText(text, 0, 300);\n    const imageData = textCtx.getImageData(0, 0, env.width, env.height);\n    return imageData\n}\n\n\nclass Dot {\n    constructor({ tx, ty }) {\n        this.tx = tx\n        this.ty = ty\n        this.sx = random(0, env.width)\n        this.sy = random(0, env.height)\n        this.x = this.sx\n        this.y = this.sy\n        this.dis = distance(this.x, this.y, tx, ty)\n        this.tra = 0\n        this.angle = Math.atan2(ty - this.y, tx - this.x)\n        this.v = 1\n    }\n    update() {\n        this.x += Math.cos(this.angle) * this.v\n        this.y += Math.sin(this.angle) * this.v\n        this.tra = distance(this.sx, this.sy, this.x, this.y)\n        if (this.tra > this.dis) {\n            this.v = 0\n        }\n    }\n    draw() {\n        ctx.fillStyle = `hsl(${env.hue},100%,80%)`;\n        ctx.beginPath();\n        ctx.fillRect(this.x, this.y, 3, 3);\n        this.update()\n    }\n}\n\n(function init(env) {\n    canvas.width = env.width;\n    canvas.height = env.height\n    const { width: w, height: h, data: nodes } = createText(\"Hello World\", env)\n    const dots = []\n    for (let y = 0; y < h; y += 10) {\n        for (let x = 0; x < w; x += 10) {\n            const index = (x + y * w) * 4 + 3\n            const pixel = nodes[index];\n            if (pixel === 255) {\n                dots.push(new Dot({ tx: x, ty: y }))\n            }\n        }\n    }\n\n    function draw() {\n        env.hue += 1.5\n        ctx.fillStyle = \"rgba(0,0,0,.2)\"\n        ctx.fillRect(0, 0, env.width, env.height)\n        dots.forEach(dot => dot.draw())\n        requestAnimationFrame(draw)\n    }\n    draw()\n}(env))"]}